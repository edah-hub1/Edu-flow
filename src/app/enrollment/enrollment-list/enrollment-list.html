<section class="p-6 max-w-4xl mx-auto">
  <h2 class="text-2xl font-bold mb-4 text-gray-800">My Enrollments</h2>

  <!-- Loading -->
  @if (loading) {
    <div class="text-blue-500">Loading enrollments...</div>
  }

  <!-- Error -->
  @if (errorMessage) {
    <div class="bg-red-100 text-red-700 p-3 rounded mb-4">{{ errorMessage }}</div>
  }

  <!-- Enrollment list -->
  @if (!loading && !errorMessage) {
    @let enrollments = enrollments$ | async;

    @if (enrollments && enrollments.length > 0) {
      <ul class="space-y-3">
        @for (e of enrollments; track e.id) {
          <li class="p-4 bg-white shadow rounded-lg border flex flex-col gap-1">
            <div class="flex justify-between items-center">
              <span class="font-semibold text-gray-800">
                Course ID: {{ e.courseId }}
              </span>
              <span
                class="px-2 py-1 text-xs rounded"
                [ngClass]="{
                  'bg-green-100 text-green-700': e.status === 'ACTIVE',
                  'bg-gray-200 text-gray-600': e.status === 'COMPLETED',
                  'bg-red-100 text-red-700': e.status === 'DROPPED'
                }"
              >
                {{ e.status }}
              </span>
            </div>
            <p class="text-sm text-gray-500">
              Enrolled on: {{ e.enrolledAt | date: 'medium' }}
            </p>
            <p class="text-sm text-blue-600">
              Progress: {{ e.progressPercentage ?? 0 }}%
            </p>
          </li>
        }
      </ul>
    } @else {
      <div class="bg-gray-50 text-gray-600 p-4 rounded text-center">
        No enrollments found.
      </div>
    }
  }
</section>
