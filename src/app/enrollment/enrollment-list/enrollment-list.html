<div class="container mt-4">
  <h2 class="mb-4">My Enrolled Courses</h2>

  <div *ngIf="loading" class="text-center alert alert-warning">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2">Loading enrollments...</p>
  </div>

  <ng-container *ngIf="enrollments$ | async as enrollments">
    <div *ngIf="enrollments.length > 0; else noEnrollments">
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Course ID</th>
            <th>Status</th>
            <th>Progress</th>
            <th>Enrolled At</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let enrollment of enrollments; let i = index; trackBy: trackByEnrollment">
            <td>{{ i + 1 }}</td>
            <td>{{ enrollment.courseId }}</td>
            <td>
              <span [ngClass]="{
                'badge bg-success': enrollment.status === 'ACTIVE',
                'badge bg-secondary': enrollment.completed
              }">
                {{ enrollment.status }}
              </span>
            </td>
            <td>{{ enrollment.progressPercentage }}%</td>
            <td>{{ enrollment.enrolledAt | date:'short' }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <ng-template #noEnrollments>
      <div class="alert alert-info">You are not enrolled in any courses yet.</div>
    </ng-template>
  </ng-container>
</div>
