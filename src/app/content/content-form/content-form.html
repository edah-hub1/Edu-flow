<div class="bg-white shadow rounded-2xl p-6 max-w-2xl mx-auto">
  <h3 class="text-xl font-semibold text-gray-800 mb-6">Create Content</h3>

  <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-6">
    <!-- Title -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
      <input
        formControlName="title"
        type="text"
        placeholder="Enter content title"
        class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-500 focus:border-blue-500"
      />
    </div>

    <!-- Description -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
      <textarea
        formControlName="description"
        rows="3"
        placeholder="Short description"
        class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-500 focus:border-blue-500"
      ></textarea>
    </div>

    <!-- Type -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Content Type</label>
      <select
        formControlName="type"
        class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-500 focus:border-blue-500"
      >
        <option value="VIDEO">Video</option>
        <option value="PDF">PDF</option>
        <option value="ARTICLE">Article</option>
        <option value="QUIZ">Quiz</option>
      </select>
    </div>

    <!-- Conditional fields -->
    @if (form.get('type')?.value === 'VIDEO') {
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Video URL</label>
        <input
          formControlName="resourceUrl"
          type="url"
          placeholder="https://youtube.com/..."
          class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-500 focus:border-blue-500"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Duration (minutes)</label>
        <input
          formControlName="durationMinutes"
          type="number"
          min="1"
          class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-500 focus:border-blue-500"
        />
      </div>
    }

    @if (form.get('type')?.value === 'PDF') {
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">PDF URL</label>
        <input
          formControlName="resourceUrl"
          type="url"
          placeholder="https://example.com/file.pdf"
          class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-500 focus:border-blue-500"
        />
      </div>
    }

    @if (form.get('type')?.value === 'ARTICLE') {
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Article Content</label>
        <textarea
          formControlName="articleContent"
          rows="6"
          placeholder="Write the full article here..."
          class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-500 focus:border-blue-500"
        ></textarea>
      </div>
    }

    @if (form.get('type')?.value === 'QUIZ') {
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Quiz ID</label>
        <input
          formControlName="quizId"
          type="number"
          placeholder="Enter linked Quiz ID"
          class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-500 focus:border-blue-500"
        />
      </div>
    }

    <!-- Order & Mandatory -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Order in Module</label>
        <input
          formControlName="orderInModule"
          type="number"
          min="1"
          class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-500 focus:border-blue-500"
        />
      </div>
      <div class="flex items-center mt-6">
        <input
          formControlName="mandatory"
          type="checkbox"
          class="h-4 w-4 text-blue-600 border-gray-300 rounded"
        />
        <label class="ml-2 text-sm text-gray-700">Mandatory</label>
      </div>
    </div>

    <!-- Error -->
    @if (errorMessage) {
      <div class="bg-red-100 text-red-700 px-4 py-2 rounded-lg">
        {{ errorMessage }}
      </div>
    }

    <!-- Actions -->
    <div class="flex justify-between mt-6">
    <a
        [routerLink]="['/courses', form.get('moduleId')?.value, 'modules']"
        class="px-5 py-2 bg-gray-500 text-white rounded-lg shadow hover:bg-gray-600 transition"
        >
        Cancel
        </a>

      <button
        type="submit"
          [routerLink]="['/courses', moduleId, 'modules']"
        [disabled]="form.invalid || isSubmitting"
        class="px-6 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700 transition"
      >
        {{ isSubmitting ? 'Saving...' : 'Save Content' }}
      </button>
    </div>
  </form>
</div>
