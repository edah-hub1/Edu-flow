<section class="p-6 max-w-3xl mx-auto">
  <h2 class="text-3xl font-bold mb-6 text-gray-800">ðŸ“˜ Quiz</h2>

  <!-- Loading -->
  @if (loading) {
    <div class="text-blue-500 animate-pulse">Loading quiz...</div>
  }

  <!-- Error -->
  @if (errorMessage && !loading) {
    <div class="bg-red-100 border border-red-300 text-red-700 p-4 rounded mb-4">
      {{ errorMessage }}
    </div>
  }

  <!-- Quiz Metadata -->
  @if (quiz && !loading) {
    <div class="mb-8 p-4 bg-gray-50 border rounded-lg shadow-sm">
      <h3 class="font-semibold text-xl mb-2">{{ quiz?.instructions }}</h3>
      <div class="flex flex-wrap gap-4 text-sm text-gray-600">
        <span class="px-2 py-1 bg-indigo-100 text-indigo-700 rounded">Attempts: {{ quiz?.maximumAttempts }}</span>
        <span class="px-2 py-1 bg-green-100 text-green-700 rounded">Pass %: {{ quiz?.passPercentage }}</span>
        <span class="px-2 py-1 bg-yellow-100 text-yellow-700 rounded">
          Randomize: {{ quiz?.randomizeQuestions ? 'Yes' : 'No' }}
        </span>
      </div>
    </div>
  }

  <!-- Questions -->
  @if (quiz?.questionResponses?.length > 0) {
    <div class="space-y-6">
      @for (q of quiz?.questionResponses; track q.id) {
        <div class="p-6 bg-white rounded-2xl shadow-md border">
          <h4 class="text-lg font-semibold text-gray-800 mb-2">
            Question {{ q?.orderInQuiz }}
          </h4>
          <p class="text-gray-700 font-medium mb-4">{{ q?.questionText }}</p>

          <!-- Options -->
          <ul class="space-y-2">
            @for (opt of q?.optionResponses; track opt.id) {
              <li class="flex items-center gap-2">
                <input
                  type="radio"
                  [name]="'question' + q?.id"
                  class="w-4 h-4 text-indigo-600 focus:ring-indigo-500 border-gray-300" />
                <span class="text-gray-700">{{ opt?.optionText }}</span>
              </li>
            }
          </ul>

          <!-- Explanation -->
          <p class="mt-3 text-sm text-gray-500 italic">
            {{ q?.explanation || 'No explanation provided.' }}
          </p>
        </div>
      }
    </div>
  }

  <!-- No Questions -->
  @if (quiz && quiz?.questionResponses?.length === 0 && !loading) {
    <div class="text-gray-500 text-center p-6 bg-gray-50 rounded-lg border">
      No questions have been added yet.
    </div>
  }
</section>
